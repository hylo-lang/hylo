//! expect-failure

fun read<T>(_ x: T) {}

fun modify<T>(_ x: inout T) {}

fun consume<T: Sinkable>(_ x: sink T) {}

// fun assign<T>(_ x: set T, to y: sink T) { &x = y }

public fun main() {
  read(42)
  consume(42)

  var x0: Int
  read(x0)              //! diagnostic use of uninitialized object
  // modify(&x0)
  consume(x0)           //! diagnostic use of uninitialized object
  // assign(&x0, to: 42)

  var x1 = 42
  read(x1)
  consume(x1)
  read(x1)              //! diagnostic use of consumed object
  consume(x1)           //! diagnostic use of consumed object
}
